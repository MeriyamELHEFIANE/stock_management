<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Page d'ajout des produits</title>
    {% load static %}
    <!-- plugins:css -->
    <link rel="stylesheet" href="{% static 'assets/vendors/feather/feather.css' %}">
    <link rel="stylesheet" href="{% static 'assets/vendors/mdi/css/materialdesignicons.min.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css ">
    <link rel="stylesheet" href="{% static  'assets/vendors/ti-icons/css/themify-icons.css' %}">
    <link rel="stylesheet" href="{% static 'assets/vendors/font-awesome/css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/vendors/typicons/typicons.css' %}">
    <link rel="stylesheet" href="{% static 'assets/vendors/simple-line-icons/css/simple-line-icons.css' %}">
    <link rel="stylesheet" href="{% static 'assets/vendors/css/vendor.bundle.base.css' %}">
    <link rel="stylesheet" href="{% static 'assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.css' %}">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="{% static 'assets/vendors/select2/select2.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/vendors/select2-bootstrap-theme/select2-bootstrap.min.css' %}">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    <!-- endinject -->
    <link rel="shortcut icon" href="{% static 'assets/images/restoManager.png' %}" />
  </head>
  <body>
    

    <div class="container-scroller">
      <!-- partial:../../partials/_navbar.html -->
      <nav class="navbar default-layout col-lg-12 col-12 p-0 fixed-top d-flex align-items-top flex-row">
        <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-start">
          <div class="me-3">
            <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-bs-toggle="minimize">
              <span class="icon-menu"></span>
            </button>
          </div>
          <div>
            <a class="navbar-brand brand-logo" href="{% url 'home' %}">
              <img src="{% static 'assets/images/restoManager.png' %}" alt="logo" />
            </a>
            <a class="navbar-brand brand-logo-mini" href="{% url 'home' %}">
              <img src="{% static 'assets/images/restoManager.png' %}" alt="logo" />
            </a>
          </div>
        </div>
        <div class="navbar-menu-wrapper d-flex align-items-top">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item d-none d-lg-block">
              <div id="datepicker-popup" class="input-group date datepicker navbar-date-picker">
                <span class="input-group-addon input-group-prepend border-right">
                  <span class="icon-calendar input-group-text calendar-icon"></span>
                </span>
                <input type="text" class="form-control">
              </div>
            </li>
          </ul>
          <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-bs-toggle="offcanvas">
            <span class="mdi mdi-menu"></span>
          </button>
        </div>
      </nav>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:../../partials/_sidebar.html -->
        <nav class="sidebar sidebar-offcanvas" id="sidebar">
          <ul class="nav">
            <li class="nav-item">
              <a class="nav-link" href="{% url 'home' %}">
                <i class="mdi mdi-view-dashboard menu-icon"></i>
                <span class="menu-title">Dashboard</span>
              </a>
            </li>

            <!--Produit-->
            <li class="nav-item nav-category">Produits</li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'ajout_produit' %}">
                <i class="mdi mdi-plus-box menu-icon"></i>
                <span class="menu-title">Ajouter un produit</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'produits' %}">
                <i class="mdi mdi-package-variant menu-icon"></i>
                <span class="menu-title">Liste des produits</span>
              </a>
            </li>

            <!--Plats-->
            <li class="nav-item nav-category">Plats</li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'ajout_plat' %}">
                <i class="mdi mdi-food menu-icon"></i>
                <span class="menu-title">Ajouter un plat</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'ajout_produit' %}">
                <i class="mdi mdi-food-variant menu-icon"></i>
                <span class="menu-title">Liste des plats</span>
              </a>
            </li>

            <!--Commande-->
            <li class="nav-item nav-category">Commandes</li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'commande' %}">
                <i class="mdi mdi-cart-plus menu-icon"></i>
                <span class="menu-title">Créer une commande</span>
              </a>
            </li>

            <!--Utilisateurs-->
            <li class="nav-item nav-category">Utilisateurs</li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'add_user' %}">
                <i class="mdi mdi-account-plus menu-icon"></i>
                <span class="menu-title">Ajouter utilisateur</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'users' %}">
                <i class="mdi mdi-account-multiple menu-icon"></i>
                <span class="menu-title">Liste des utilisateurs</span>
              </a>
            </li>

            <!--Notifications-->
            <li class="nav-item nav-category">Notifications</li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'notification' %}">
                <i class="mdi mdi-bell menu-icon"></i>
                <span class="menu-title">Notifications</span>
              </a>
            </li>
          </ul>
        </nav>

        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">
            <div class="row">
              <div class="card mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="mb-0"><i class="bi bi-box-seam me-2"></i>Ajouter un produit</h5>
                  <small class="text-muted float-end">Formulaire produit</small>
                </div>
                <div class="card-body">
                  <form id="myForm">

                    <!-- Nom du produit -->
                    <div class="mb-3">
                      <label class="form-label" for="nom"><i class="bi bi-tag me-1"></i>Nom du produit</label>
                      <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-tag-fill"></i></span>
                        <input type="text" class="form-control" id="nom" name="nom"  placeholder="Nom du produit"required />
                      </div>
                    </div>

                    <!-- Quantité -->
                    <div class="mb-3">
                      <label class="form-label" for="quantite"><i class="bi bi-basket me-1"></i>Quantité</label>
                      <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-basket-fill"></i></span>
                        <input type="number" step="0.01" class="form-control" id="quantite" name="quantite" placeholder="0.00" required />
                      </div>
                    </div>

                    <!-- Unité -->
                    <div class="mb-3">
                      <label class="form-label" for="unite"><i class="bi bi-rulers me-1"></i>Unité</label>
                      <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-rulers"></i></span>
                        <input type="text" class="form-control" id="unite" name="unite" placeholder="Unité" required />
                      </div>
                    </div>

                    <!-- Seuil critique -->
                    <div class="mb-3">
                      <label class="form-label" for="seuil_critique"><i class="bi bi-exclamation-triangle me-1"></i>Seuil critique</label>
                      <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-exclamation-triangle-fill"></i></span>
                        <input type="number" step="0.01" class="form-control" id="seuil_critique" name="seuil_critique" placeholder="3.00" required />
                      </div>
                    </div>

                    <!-- Date de péremption -->
                    <div class="mb-3">
                      <label class="form-label" for="date_peremption"><i class="bi bi-calendar-event me-1"></i>Date de péremption</label>
                      <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-calendar-check-fill"></i></span>
                        <input type="date" class="form-control" id="date_peremption" name="date_peremption" required />
                      </div>
                    </div>

                    <!-- Bouton Ajouter -->
                    <button type="submit" class="btn btn-primary">
                      <i class="bi bi-plus-circle me-1"></i>Ajouter
                    </button>
                  </form>
                </div>
              </div>


<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
   document.getElementById("logoutBtn").addEventListener("click", () => {
    localStorage.removeItem("token");
    localStorage.removeItem("user");
   window.location.replace("/dist/pages/samples/login.html"); 
});
</script>
<script>
document.getElementById("myForm").addEventListener("submit", e => {
e.preventDefault();

const data = {
nom: document.getElementById("nom").value,
quantite: parseFloat(document.getElementById("quantite").value),
unite: document.getElementById("unite").value,
seuil_critique: parseFloat(document.getElementById("seuil_critique").value),
date_peremption: document.getElementById("date_peremption").value,
};

axios.post("{{ API_URL }}/api/produits/", data)
.then(() => alert("✅ Produit ajouté avec succès !"))
.catch(error => {
console.error(error);
alert("❌ Erreur lors de l'ajout du produit.");
});
});
</script>

            </div>
          </div>
          <!-- content-wrapper ends -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="{% static 'assets/vendors/js/vendor.bundle.base.js'%}"></script>
    <script src="{% static 'assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.js'%}"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <script src="{% static 'assets/vendors/typeahead.js/typeahead.bundle.min.js'%}"></script>
    <script src="{% static 'assets/vendors/select2/select2.min.js'%}"></script>
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="{% static 'assets/js/off-canvas.js'%}"></script>
    <script src="{% static 'assets/js/template.js'%}"></script>
    <script src="{% static 'assets/js/settings.js'%}"></script>
    <script src="{% static 'assets/js/hoverable-collapse.js'%}"></script>
    <script src="{% static 'assets/js/todolist.js'%}"></script>
    <!-- endinject -->
    <!-- Custom js for this page-->
    <script src="{% static 'assets/js/file-upload.js'%}"></script>
    <script src="{% static 'assets/js/typeahead.js'%}"></script>
    <script src="{% static 'assets/js/select2.js'%}"></script>
    <!-- End custom js for this page-->
  </body>
</html>